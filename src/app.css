@import url('https://fonts.googleapis.com/css2?family=Raleway:wght@400;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Cutive+Mono&display=swap');
@import 'tailwindcss';

@custom-variant dark (&:where(.dark, .dark *));
@theme {
	--font-roboto: 'Roboto', sans-serif;
	--font-mono: 'Cutive Mono', monospace;
	--font-sans: 'Raleway', ui-sans-serif, system-ui, sans-serif;
	--color-primary: #ffffff;
	--color-secondary: #000000;
	--color-accent: #ff3333;
}

:global(.leaflet-control-zoom) {
	@apply overflow-hidden rounded-lg font-sans shadow-lg;
}
:global(.leaflet-control-zoom-in),
:global(.leaflet-control-zoom-out) {
	background: red !important;
	color: white !important;
}
:global(.dark .leaflet-control-zoom-in),
:global(.dark .leaflet-control-zoom-out) {
	@apply bg-black text-white;
}
:global(.leaflet-control-zoom-in:hover),
:global(.leaflet-control-zoom-out:hover) {
	@apply bg-gray-200 text-black;
}
:global(.dark .leaflet-control-zoom-in:hover),
:global(.dark .leaflet-control-zoom-out:hover) {
	@apply bg-gray-700 text-white;
}
:global(.leaflet-control-zoom button) {
	background: red !important;
	color: white !important;
	border: none !important;
}
:global(.dark .leaflet-control-zoom button) {
	background: #111 !important;
	color: #fff !important;
}

/* Firefox */
::-moz-selection {
	background: var(--accent-red);
	color: white;
}

:root {
	--accent-red: #ff3333;
	--map-tiles-filter: brightness(0.6) invert(1) contrast(3) hue-rotate(200deg) saturate(0.3)
		brightness(0.7);
}

/* Period styling */
.text-content {
	color: inherit;
}

.text-content span {
	color: var(--accent-red);
}

/* Scrollbar styling */
::-webkit-scrollbar {
	width: 10px;
}

/* Light mode */
::-webkit-scrollbar-track {
	background: transparent;
}
::-webkit-scrollbar-thumb {
	background: theme('colors.black');
	border: 2px solid transparent;
	background-clip: padding-box;
	border-radius: 9999px;
}
::-webkit-scrollbar-thumb:hover {
	background: var(--accent-red);
}

/* Dark mode */
.dark ::-webkit-scrollbar-track {
	background: #000;
}
.dark ::-webkit-scrollbar-thumb {
	background: #fff;
}
.dark ::-webkit-scrollbar-thumb:hover {
	background: var(--accent-red);
}

/* Selection styling */
::selection {
	background: var(--accent-red);
	color: white;
}

body {
	@apply bg-white font-sans dark:bg-black;
}

.nav-underline {
	position: relative;
	display: inline-block;
}

.nav-underline::after {
	content: '';
	position: absolute;
	left: 0;
	bottom: 0;
	width: 0;
	height: 2px;
	background: var(--accent-red, #ff3333);
	border-radius: 9999px;
	transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.nav-underline:hover::after,
.nav-underline.active::after {
	width: 100%;
}

.masonry {
	column-count: 1;
	column-gap: 1rem;
}
@media (min-width: 640px) {
	.masonry {
		column-count: 2;
	}
}
@media (min-width: 1024px) {
	.masonry {
		column-count: 3;
	}
}
.photo-thumb {
	break-inside: avoid;
	display: block;
	width: 100%;
}

.dark .map-tiles {
	filter: var(--map-tiles-filter, none);
}

.leaflet-container {
	background: #f3f4f6 !important; /* light mode */
}
.dark .leaflet-container {
	background: #18181b !important; /* dark mode */
}

:global(.custom-popup a) {
	@apply mt-2 inline-block rounded bg-red-600 px-4 py-2 font-bold text-white no-underline transition hover:bg-red-700;
}

/* Leaflet Popup Styling */
/* Override Leaflet's default popup background directly */
/* Light Mode */
:global(body:not(.dark) .leaflet-popup-content-wrapper),
:global(body:not(.dark) .leaflet-popup-tip) {
	background-color: white !important;
}

:global(body:not(.dark) .leaflet-popup-content) {
	@apply text-black; /* Assuming your custom-popup content already handles this */
}

/* Dark Mode */
:global(body.dark .leaflet-popup-content-wrapper),
:global(body.dark .leaflet-popup-tip) {
	background-color: #1a202c !important; /* Your dark background color */
}

:global(body.dark .leaflet-popup-content) {
	@apply text-gray-200; /* Assuming your custom-popup content already handles this */
}

/* Keep your .custom-popup rules for other things like padding, font, shadow, etc. */
/* but the background is now handled by the more direct overrides above. */

:global(.custom-popup .leaflet-popup-content-wrapper) {
	@apply rounded-lg p-0 shadow-lg;
	/* background-color: white !important; /* REMOVE this line, handled above */
}

:global(.custom-popup .leaflet-popup-content) {
	@apply p-4 font-sans text-base; /* text-black/text-gray-200 handled by direct overrides */
	max-width: 320px;
	margin: 0 !important;
}

:global(.custom-popup .leaflet-popup-tip) {
	/* background-color: white !important; /* REMOVE this line, handled above */
}

:global(.custom-popup a.leaflet-popup-close-button) {
	@apply opacity-70 hover:opacity-100; /* text color will be inherited or set by direct overrides */
}

/* Dark Mode Popup Styling (for .custom-popup specifics other than background) */
:global(.dark .custom-popup .leaflet-popup-content-wrapper) {
	/* background-color: #1a202c !important; /* REMOVE this line, handled above */
}

/* :global(.dark .custom-popup .leaflet-popup-content) { */
/* @apply text-gray-200; /* This is fine, or let it be handled by direct override */
/* } */

:global(.dark .custom-popup .leaflet-popup-tip) {
	/* background-color: #1a202c !important; /* REMOVE this line, handled above */
}

/* :global(.dark .custom-popup a.leaflet-popup-close-button) { */
/* @apply text-gray-200 opacity-70 hover:opacity-100; /* This is fine */
/* } */

/* Styles for your content inside the popup (image, title, link) */
:global(.custom-popup img) {
	/* This should still work */
	@apply mb-2 max-w-full rounded;
	width: 140px;
}

:global(.custom-popup strong.text-lg) {
	/* This should still work */
	/* Title will inherit color from .leaflet-popup-content */
}

:global(.custom-popup a) {
	/* This is your "View" link, should still work */
	@apply mt-2 inline-block rounded bg-red-600 px-4 py-2 font-bold text-white no-underline transition hover:bg-red-700;
}
